{"name":"Aeneas","tagline":"Aeneas: A Tool to Enable Applications to Effectively Use Non-relational Databases","body":"<img align=\"center\" src=\"http://i.imgur.com/btdQJC2.jpg\" title=\"Aeneas: An Extensible NoSql Enhancing Application System\" />\r\nAeneas\r\n======\r\n\r\nNon-relational databases arise as a solution to solve the scalability problems of relational databases when dealing with big data applications. Since they are highly configurable, their performance is heavily affected by user decisions.To maximize performance, many different data models and queries must be analyzed, in order to then choose the best fit. This requires performing a wide range of test which can cause **productivity issues**.\r\n\r\nWe present **Aeneas**, a tool to support the design of data management code for applications using non-relational databases. Aeneas provides an easy and fast methodology to support the decision about how to organize and retrieve data in order to improve the performance.\r\n\r\nThe main goal of Aeneas is to offer a methodology to increase the productivity of the evaluation process, which will lead the user to get the best configuration parameters and data model in order to access data.\r\nThis goal is achieved through the three modules: \r\n \r\n* **Loader**\r\n* **Workloader**\r\n* **Node Agent**\r\n\r\nThe **Loader** abstracts the insertion  of data: it allows to  easily  reorganize and marshall information  in order to try different  configurations. At the same time,  the **Workloader** allows to tests  different types of  workloads (e.g one with a uniform distribution or ZipFian etc..). Finally, the **Node Agent** has a double role: firstly it  samples each node of the cluster getting many performance metrics (db's internal, SO' status, hard disks ..) and then it allows the user to easily **analyse** and **transform** the results through a  handy **web interface**.\r\n\r\n##Aeneas' structure\r\n <img src=\"http://i.imgur.com/9LQOTKx.png\" title=\"Aeneas' structure\" />\r\nBranches\r\n=========\r\nAt the moment, Aeneas exists in two versions: the **first** is the one which is currently  used in production for supporting research. \r\n\r\n#Aeneas #1\r\nIt primarily relies on the Apache Cassandra Database. In the repository is provided both the core structure than a practical use case of its use.\r\n\r\nThe package structure is the following:\r\n\r\n\t.\r\n\t+-- CassandraBM\r\n\t|   +-- cassandra-datamodel  \t\t# New internal Cassandra types and partitioners \r\n\t|   +-- cassandra-metric-recorder   # a library to store in Cassandra metrics for any application\r\n\t|   +-- codeGenerator\t\t\t\t# static java queries' code generator (INSTABLE) \r\n\t|   +-- commons\r\n\t|   +-- loader\t\t\t\t\t\t# the loader API: cli, source reading and inserting\r\n\t|   +-- model\t\t\t\t\t\t# internal model representation\r\n\t|   +-- node-agent\t\t\t\t\t# Node-agent daemon\r\n\t|   +-- workloader\t\t\t\t\t# Workloader API: workload types and keys generation\r\n\t+-- bscproj1\r\n\t|   +-- bsc01-loader-impl          # use case loader implementation\r\n\t|   +-- bsc01-workloader          \t# use case workloader implementation\r\n\r\n\r\n###Installation \r\n\r\nAeneas relies on a modified version of the Hector client in order to fix some incompatibility between the Integer serialization between Java and Cassandra.\r\nHere, how to install it: \r\n\t\r\n\tgit clone https://github.com/cugni/hector\r\n\tcd hector\r\n\tmvn -DskipTests install \r\n\r\nNow we can clone Aeneas and install it\r\n\r\n\tgit clone https://github.com/cugni/aeneas\r\n\tcd aeneas-1/CassandraBM\r\n\tmvn install\t\r\n\tcd ../bscproj1\r\n\tmvn install\r\n\t\r\n *\\*Some tests require a running instance of Cassandra on localhost; you can avoid it using the comand mvn -DskipTests install*\r\n\r\n*\\*\\*Note that the installation on OSX may fail: The class JMXCassandraReader at the lines 145 and 148 requires the Oracle JVM instead of the Apple one. As a workaround,  you can both change JVM or comment those lines.*\r\n \r\n Now you can find in your local Maven repository all the required artifacts. \r\n \r\n###Building\r\n#####NodeAgent\r\n\r\nThese are the comands for edit the configuration file and build an executable jar file with all the dependencies of the **NodeAgent**:\r\n\r\n\tcd CassandraBM/node-agent\r\n\t# edit this file to change the default paraments (e.g. cluster address etc..)\r\n\tnano src/main/resources/META-INF/nodeagent-config.xml \r\n\tmvn package\r\n\t# lunching the Node Agent\r\n\tjava -jar target/node-agent-1.0-SNAPSHOT-executable.jar \r\n\r\nNow we can start an instance of the NodeAgent in each Cassandra's node and control them remotely via HTTP requests.\r\n\r\n\r\nThe basic comands are:\r\n\r\n**Init** : configures which  Cassandra's Column Family have to be sampled\r\n\t\r\n\tcurl http://n1.example.com:2626/q/init?column=keyspace:columnFamily\r\n\t\r\n**Start**: starts the sampling of metrics in the context of a specific test\r\n\t\r\n\tcurl http://n1.example.com:2626/q/start?testname=example\r\n\r\n**Stop**: interrupts the sampling\r\n\t\r\n\tcurl http://n1.example.com:2626/q/start?testname=example\r\n\t\r\n\r\n\r\n#####Loader and workloader\r\n\r\nBoth the  loader  and workloader modules contain only the  main logic and the interfaces which have to be implemented in order to automize the loading and the testing. The package **bscproj1** provides two implementation samples for trying those functionalities.\r\n\r\n\tcd bscproj1/bsc01-loader-impl/\r\n\tmvn assembly:assembly\r\n\t\r\n\t# This command starts to load the data contained in test.txt\r\n\t# according to the model description of the file conf/FidXAid.cm.xml\r\n\techo -e \"load-data conf/FidXAid.cm.xml test.txt \\n quit \\n\"| \\ # you can type this command also via cli\r\n\tjava -Dclusterlocation=\"minerva-5:29160\" \\ #entry point of the cluster\r\n \t\t-Dqueuelength=5000 \\   # queue size for batching the requests\r\n \t\t-Dclustername=AeneasTesting \\ \r\n \t\t-Dnumberofthreads=50 \\ # concurrent insertions\r\n        -jar target/bsc01loaderimpl-1.0-SNAPSHOT-jar-with-dependencies.jar \r\n\t\r\n\r\nOnce loaded the data into the cluster is time to test different query types:\r\n\r\n\tcd bscproj1/bsc01-workloader/\r\n\tmvn assembly:assembly\r\n\t\r\n\t\r\n###Run an experiment\r\nOnce loaded the data into the cluster and built the workloader we can start a test with the following script\r\n\t\r\n\t# We suppose to have a list of all the servers into the variable $servers\r\n\t\r\n\t#let's init the NodeAgents\r\n\tfor i in $servers; do\t\t\r\n\t\tcurl http://$i:2626/q/init?column=FixXAid:points\r\n\tdone\r\n\t\r\n\t#let's start the test!\r\n\t\r\n\tfor i in $servers; do\t\t\r\n\t\tcurl http://$i:2626/q/start?testname=prova\r\n\tdone\r\n\t\r\n\tjava -Dmodel=FidXAid \\\r\n\t\t -Ddistribution=UNIFORM \\ \t\t# Which statistical distribution use for generate the keys?\r\n\t\t -Dreadconsistency=ONE \\\t\t\r\n\t\t -Dtestname=prova \\\r\n\t\t -Dclusterlocation=somewhere:9160 \\\r\n\t\t -Dreportingserverlocation=somewhereelse:9160 \\\r\n\t\t -Dreportingserverclustername=AeneasMetrics \\\r\n \t\t -Dntest=100 \\  \t\t\t\t# Number of times the tests are repeated\r\n\t\t -Dconcurrency=10 \\ \t\t\t# Concurrent requests\r\n\t\t -Dcontinueonerror=false \\    \t# if there is an error, do you wish to stop the test?\r\n\t\t -Dcontinueontimeout=false \\\t# if there is an timeout, do you wish to stop the test?\r\n\t\t -jar target/bsc01workloader-1.0-SNAPSHOT-jar-with-dependencies.jar \r\n\r\n\r\nNow that your experiment is done you can connect to any of the NodeAgents in your cluster (e.g. http://Now that your experiment is done you can connect to any of the NodeAgents in your cluster (e.g. http://n1.example.com:2626/) with any browser (but better chrome) and retrieve, print and manipulate your data. Enjoy!\r\n \r\n\r\n\t\r\n \r\n#Aeneas #2\r\n\r\n\r\nThe second version is currently under developing. It has been heavily refactored in order to make Aeneas easily extensible to \"*any*\" kind of data store always keeping a  unique abstract data representation. The re-factory aims also to allow Aeneas to be exposed to clients via a standard REST interface. The  **Node Agent** web interface is also changing in order to provide to the user a powerful workbench where retrieve data, manipulate it through scripts and stored modified versions.\r\n\r\n#Further reading\r\n\r\nAeneas has been presented at the 2013 International Conference on Computational Science in a paper titled \"Aeneas: A Tool to Enable Applications to Effectively Use Non-relational Databases\". The paper can be downloaded from  [http://www.sciencedirect.com/science/article/pii/S187705091300584X](http://www.sciencedirect.com/science/article/pii/S187705091300584X).\r\n\r\nAt [http://www.slideshare.net/CesareCugnasco/aeneas-an-extensible-nosql-enhancing-application-system](http://www.slideshare.net/CesareCugnasco/aeneas-an-extensible-nosql-enhancing-application-system) there are the slides made for a seminary held at the Universitat Politècnica de Catalunya in November 2013.\r\n\r\n\r\n#Acknowledgements\r\n\r\nThis work is partially supported by the **BSC-CNS Severo Ochoa** program and the TIN2012-34557 project, with funding from the **Spanish Ministry of Economy and Competitivity** and the European Union’s **FEDER founds**.\r\n\r\n\r\n#License\r\n\r\nCopyright 2014  Barcelona Supercomputing Center\r\n\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n\r\nThe framework relies on libraries which may have stricter licences. For instance, the Node Agent (version 1) uses the library [HighCharts](http://www.highcharts.com/) which is released with an [Attribution-NonCommercial 3.0 Unported Licence](http://creativecommons.org/licenses/by-nc/3.0/).\r\n","google":"UA-47747246-1","note":"Don't delete this file! It's used internally to help with page regeneration."}